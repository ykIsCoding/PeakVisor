import { readFile } from 'fs';
/** A simple cache used to store the serialized animation data. */
const cache = new Map();
export function readFileWithAnimationData(path) {
    return cache.has(path)
        ? Promise.resolve(cache.get(path))
        : new Promise((resolve, reject) => {
            readFile(path, (error, buffer) => {
                if (error) {
                    reject(error);
                }
                else {
                    const data = buffer.toString();
                    cache.set(path, data);
                    resolve(data);
                }
            });
        });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi9saWJzL25neC1sb3R0aWUvc2VydmVyL3NyYy91dGlscy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sSUFBSSxDQUFDO0FBSTlCLGtFQUFrRTtBQUNsRSxNQUFNLEtBQUssR0FBRyxJQUFJLEdBQUcsRUFBeUIsQ0FBQztBQUUvQyxNQUFNLFVBQVUseUJBQXlCLENBQUMsSUFBWTtJQUNwRCxPQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDO1FBQ3BCLENBQUMsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFFLENBQUM7UUFDbkMsQ0FBQyxDQUFDLElBQUksT0FBTyxDQUFDLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxFQUFFO1lBQzlCLFFBQVEsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUU7Z0JBQy9CLElBQUksS0FBSyxFQUFFO29CQUNULE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztpQkFDZjtxQkFBTTtvQkFDTCxNQUFNLElBQUksR0FBRyxNQUFNLENBQUMsUUFBUSxFQUFFLENBQUM7b0JBQy9CLEtBQUssQ0FBQyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO29CQUN0QixPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7aUJBQ2Y7WUFDSCxDQUFDLENBQUMsQ0FBQztRQUNMLENBQUMsQ0FBQyxDQUFDO0FBQ1QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHJlYWRGaWxlIH0gZnJvbSAnZnMnO1xuXG5pbXBvcnQgeyBBbmltYXRpb25EYXRhIH0gZnJvbSAnLi9zeW1ib2xzJztcblxuLyoqIEEgc2ltcGxlIGNhY2hlIHVzZWQgdG8gc3RvcmUgdGhlIHNlcmlhbGl6ZWQgYW5pbWF0aW9uIGRhdGEuICovXG5jb25zdCBjYWNoZSA9IG5ldyBNYXA8c3RyaW5nLCBBbmltYXRpb25EYXRhPigpO1xuXG5leHBvcnQgZnVuY3Rpb24gcmVhZEZpbGVXaXRoQW5pbWF0aW9uRGF0YShwYXRoOiBzdHJpbmcpOiBQcm9taXNlPEFuaW1hdGlvbkRhdGE+IHtcbiAgcmV0dXJuIGNhY2hlLmhhcyhwYXRoKVxuICAgID8gUHJvbWlzZS5yZXNvbHZlKGNhY2hlLmdldChwYXRoKSEpXG4gICAgOiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHJlYWRGaWxlKHBhdGgsIChlcnJvciwgYnVmZmVyKSA9PiB7XG4gICAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgICByZWplY3QoZXJyb3IpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYnVmZmVyLnRvU3RyaW5nKCk7XG4gICAgICAgICAgICBjYWNoZS5zZXQocGF0aCwgZGF0YSk7XG4gICAgICAgICAgICByZXNvbHZlKGRhdGEpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbn1cbiJdfQ==